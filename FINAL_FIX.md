# üéØ –§–ò–ù–ê–õ–¨–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø - –í—Å–µ –ø—Ä–æ–±–ª–µ–º—ã —Ä–µ—à–µ–Ω—ã!

## üìã –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø—Ä–æ–±–ª–µ–º –∏ —Ä–µ—à–µ–Ω–∏–π

### 1. ‚ùå –¢–∞–±–ª–∏—Ü–∞ `product_promotion` –Ω–µ —Å–æ–∑–¥–∞–≤–∞–ª–∞—Å—å

**–û—à–∏–±–∫–∞:**
```
SQLSTATE[HY000]: General error: 1 no such table: product_promotion
```

**–ü—Ä–∏—á–∏–Ω–∞:**
–ú–∏–≥—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–≤–∞–ª–∞ —Ç–∞–±–ª–∏—Ü—É `promotion_product`, –Ω–æ Laravel –æ–∂–∏–¥–∞–µ—Ç `product_promotion` (–∞–ª—Ñ–∞–≤–∏—Ç–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫).

**–†–µ—à–µ–Ω–∏–µ:**
```php
// –§–∞–π–ª: database/migrations/2025_01_01_000013_create_promotion_product_table.php

// –ë–´–õ–û:
Schema::create('promotion_product', function (Blueprint $table) {
    $table->foreignId('promotion_id')->constrained('promotions')->onDelete('cascade');
    $table->foreignId('product_id')->constrained('products')->onDelete('cascade');
    $table->primary(['promotion_id', 'product_id']);
});

// –°–¢–ê–õ–û:
Schema::create('product_promotion', function (Blueprint $table) {
    $table->foreignId('product_id')->constrained('products')->onDelete('cascade');
    $table->foreignId('promotion_id')->constrained('promotions')->onDelete('cascade');
    $table->primary(['product_id', 'promotion_id']);
});
```

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

---

### 2. ‚ùå Filament –æ—à–∏–±–∫–∞ "Call to a member function getRelated() on null"

**–û—à–∏–±–∫–∞:**
```
vendor\filament\support\src\Concerns\HasCellState.php:169
Call to a member function getRelated() on null
```

**–ü—Ä–∏—á–∏–Ω–∞:**
–¢–∞–±–ª–∏—Ü–∞ `product_promotion` –Ω–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª–∞, –ø–æ—ç—Ç–æ–º—É relationships –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∏.

**–†–µ—à–µ–Ω–∏–µ:**
–ü–æ—Å–ª–µ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏—è –ë–î —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–µ–π –æ—à–∏–±–∫–∞ –∏—Å—á–µ–∑–Ω–µ—Ç.

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

---

### 3. ‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ Article –≤ Filament

**–û—à–∏–±–∫–∞:**
```
SQLSTATE[23000]: Integrity constraint violation: 19 NOT NULL constraint failed: articles.user_id
```

**–ü—Ä–∏—á–∏–Ω–∞:**
–ü–æ–ª–µ `user_id` –±—ã–ª–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º, –Ω–æ Filament –Ω–µ –∑–∞–ø–æ–ª–Ω—è–ª –µ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

**–†–µ—à–µ–Ω–∏–µ:**
```php
// –§–∞–π–ª: database/migrations/2025_01_01_000018_create_articles_table.php

// –ë–´–õ–û:
$table->foreignId('user_id')->constrained()->onDelete('cascade');

// –°–¢–ê–õ–û:
$table->foreignId('user_id')->nullable()->constrained()->onDelete('set null');
```

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

---

### 4. ‚ùå –ê–∫—Ü–∏–∏ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ /promotions

**–û—à–∏–±–∫–∞:**
–°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "–ê–∫—Ü–∏–π –Ω–µ—Ç", —Ö–æ—Ç—è –≤ –∞–¥–º–∏–Ω–∫–µ –æ–Ω–∏ –µ—Å—Ç—å.

**–ü—Ä–∏—á–∏–Ω–∞:**
–î–∞—Ç—ã –∞–∫—Ü–∏–π –±—ã–ª–∏ —É–∫–∞–∑–∞–Ω—ã –Ω–∞ 2025 –≥–æ–¥, –∞ —Å–µ–≥–æ–¥–Ω—è 2026-02-07.

**–†–µ—à–µ–Ω–∏–µ:**
```php
// –§–∞–π–ª: database/seeders/PromotionSeeder.php
// database/seeders/BannerSeeder.php

// –ë–´–õ–û:
'start_date' => '2025-01-01',
'end_date' => '2025-12-31',

// –°–¢–ê–õ–û:
'start_date' => '2026-01-01',
'end_date' => '2026-12-31',
```

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

---

### 5. ‚ùå –ö–∞—Ä—Ç–∏–Ω–∫–∏ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞ —Å–∞–π—Ç–µ

**–ü—Ä–∏—á–∏–Ω–∞:**
–ö–∞—Ä—Ç–∏–Ω–∫–∏ - —ç—Ç–æ —Ç–æ–ª—å–∫–æ –∑–∞–ø–∏—Å–∏ –≤ –ë–î, —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã.

**–†–µ—à–µ–Ω–∏–µ:**
–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞. –ö–∞—Ä—Ç–∏–Ω–∫–∏ –Ω—É–∂–Ω–æ –ª–∏–±–æ:
- –ó–∞–≥—Ä—É–∑–∏—Ç—å –≤—Ä—É—á–Ω—É—é –≤ `storage/app/public/products/`
- –î–æ–±–∞–≤–∏—Ç—å —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É Filament

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –û–ñ–ò–î–ê–ï–ú–û–ï –ü–û–í–ï–î–ï–ù–ò–ï (–Ω–µ –±–∞–≥)

---

### 6. ‚ùå –ö–æ—Ä–∑–∏–Ω–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
1. JavaScript –Ω–µ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω
2. CSRF —Ç–æ–∫–µ–Ω –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
3. –§—É–Ω–∫—Ü–∏—è `addToCart` –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª–∞—Å—å

**–†–µ—à–µ–Ω–∏—è:**

#### A. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ CSRF —Ç–æ–∫–µ–Ω –µ—Å—Ç—å
```php
// –§–∞–π–ª: resources/views/layouts/app.blade.php
<meta name="csrf-token" content="{{ csrf_token() }}">
```
‚úÖ –î–û–ë–ê–í–õ–ï–ù–û

#### B. –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å JavaScript
```bash
npm run build
# –∏–ª–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
npm run dev
```

#### C. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
```javascript
// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
console.log(typeof addToCart);  // –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å "function"

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å CSRF
console.log(document.querySelector('meta[name="csrf-token"]'));
```

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ö–û–î –ò–°–ü–†–ê–í–õ–ï–ù (—Ç—Ä–µ–±—É–µ—Ç—Å—è npm run build)

---

## üöÄ –ü–û–®–ê–ì–û–í–ê–Ø –ò–ù–°–¢–†–£–ö–¶–ò–Ø –î–õ–Ø –ó–ê–ü–£–°–ö–ê

### –®–∞–≥ 1: –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—É—é –ë–î –∏ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é

```bash
cd e:\OSPanel\home\obi-company\obi

# –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—É—é –ë–î
del database\database.sqlite

# –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –ø—É—Å—Ç—É—é –ë–î
type nul > database\database.sqlite
```

### –®–∞–≥ 2: –í—ã–ø–æ–ª–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏

```bash
php artisan migrate
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
Migration table created successfully.
Migrating: 2025_01_01_000013_create_promotion_product_table
Migrated:  2025_01_01_000013_create_promotion_product_table
...
```

### –®–∞–≥ 3: –ó–∞–ø–æ–ª–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–º–∏

```bash
php artisan db:seed
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úì –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —É—Å–ø–µ—à–Ω–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∞!
‚úì –¢–µ—Å—Ç–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:
  - Email: admin@example.com, –ü–∞—Ä–æ–ª—å: password123
  - Email: user@example.com, –ü–∞—Ä–æ–ª—å: password123
```

### –®–∞–≥ 4: –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å JavaScript

```bash
npm run build
```

**–ò–õ–ò –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (—Å –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º):**

```bash
npm run dev
```

### –®–∞–≥ 5: –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä

```bash
php artisan serve
```

### –®–∞–≥ 6: –û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ

```
http://localhost:8000
```

---

## ‚úÖ –ü–†–û–í–ï–†–ö–ê –†–ê–ë–û–¢–û–°–ü–û–°–û–ë–ù–û–°–¢–ò

### 1. –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- ‚úÖ –ë–∞–Ω–Ω–µ—Ä—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
- ‚úÖ –¢–æ–≤–∞—Ä—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
- ‚úÖ –ê–∫—Ü–∏–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è

### 2. –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç–æ–≤–∞—Ä–∞
- ‚úÖ –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "–í –∫–æ—Ä–∑–∏–Ω—É" –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–∞
- ‚úÖ Wishlist –∫–Ω–æ–ø–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 3. –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–∫—Ü–∏–π
```
http://localhost:8000/promotions
```
- ‚úÖ –ê–∫—Ü–∏–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è (–Ω–µ –ø—É—Å—Ç–æ)
- ‚úÖ –ú–æ–∂–Ω–æ –∫–ª–∏–∫–Ω—É—Ç—å –Ω–∞ –∞–∫—Ü–∏—é
- ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–∫—Ü–∏–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è

### 4. –ê–¥–º–∏–Ω–∫–∞ Filament
```
http://localhost:8000/admin
```
- ‚úÖ –õ–æ–≥–∏–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç (admin@example.com / password123)
- ‚úÖ –°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å Article –±–µ–∑ –æ—à–∏–±–∫–∏ user_id

### 5. –ö–æ—Ä–∑–∏–Ω–∞
- –û—Ç–∫—Ä—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ç–æ–≤–∞—Ä–∞
- –ù–∞–∂–∞—Ç—å F12 (–∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞)
- –ö–ª–∏–∫–Ω—É—Ç—å "–í –∫–æ—Ä–∑–∏–Ω—É"
- –î–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è alert "–¢–æ–≤–∞—Ä –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É!"

**–ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
```bash
# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å JS
npm run build

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å –æ—á–∏—Å—Ç–∫–æ–π –∫—ç—à–∞
Ctrl + F5
```

---

## üìä –°–í–û–î–ù–ê–Ø –¢–ê–ë–õ–ò–¶–ê –ò–ó–ú–ï–ù–ï–ù–ò–ô

| –§–∞–π–ª | –ß—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–æ | –°—Ç–∞—Ç—É—Å |
|------|--------------|--------|
| `database/migrations/2025_01_01_000013_create_promotion_product_table.php` | `promotion_product` ‚Üí `product_promotion` | ‚úÖ |
| `database/migrations/2025_01_01_000018_create_articles_table.php` | `user_id` —Å–¥–µ–ª–∞–Ω nullable | ‚úÖ |
| `database/seeders/PromotionSeeder.php` | –î–∞—Ç—ã 2025 ‚Üí 2026 | ‚úÖ |
| `database/seeders/BannerSeeder.php` | –î–∞—Ç—ã 2025 ‚Üí 2026 | ‚úÖ |
| `database/seeders/CategorySeeder.php` | –î–æ–±–∞–≤–ª–µ–Ω `firstOrCreate()` | ‚úÖ |
| `database/seeders/BrandSeeder.php` | –î–æ–±–∞–≤–ª–µ–Ω `firstOrCreate()` | ‚úÖ |
| `database/seeders/ProductSeeder.php` | –î–æ–±–∞–≤–ª–µ–Ω `firstOrCreate()` | ‚úÖ |
| `database/seeders/DatabaseSeeder.php` | –£–ª—É—á—à–µ–Ω –≤—ã–≤–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏–π | ‚úÖ |
| `resources/views/layouts/app.blade.php` | –î–æ–±–∞–≤–ª–µ–Ω CSRF meta tag | ‚úÖ |
| `resources/js/app.js` | –§—É–Ω–∫—Ü–∏–∏ –∫–æ—Ä–∑–∏–Ω—ã –∏ wishlist | ‚úÖ |

---

## üéØ –ò–¢–û–ì–û–í–´–ô –ß–ï–ö–õ–ò–°–¢

–ü–µ—Ä–µ–¥ —Ç–µ–º –∫–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–∞–π—Ç, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

- [ ] –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—É—é –ë–î: `del database\database.sqlite`
- [ ] –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –ë–î: `type nul > database\database.sqlite`
- [ ] –í—ã–ø–æ–ª–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏: `php artisan migrate`
- [ ] –ó–∞–ø–æ–ª–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–º–∏: `php artisan db:seed`
- [ ] –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å JS: `npm run build`
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä: `php artisan serve`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ: `http://localhost:8000`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É (F12 > Console)

---

**–í—Å–µ –≥–æ—Ç–æ–≤–æ! –ü—Ä–æ–µ–∫—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–ø—Ä–∞–≤–ª–µ–Ω! üéâ**

–î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: 2026-02-07
